"use strict";(self.webpackChunktest_task_react=self.webpackChunktest_task_react||[]).push([[745],{8970:function(e,n,t){t.d(n,{Z:function(){return r}});var a="BtnSignUp_button__yTg46",i=t(184);function r(e){var n=e.type,t=void 0===n?"button":n,r=e.children,o=e.showMore,s=e.isSubmitting;return(0,i.jsx)("button",{className:a,onClick:o,type:t,disabled:s,children:r})}},2745:function(e,n,t){t.r(n),t.d(n,{default:function(){return C}});var a=t(5861),i=t(7757),r=t.n(i),o="Form_container__WXj-7",s="Form_title__5gZHF",l="Form_form__e1yzW",c="Form_label__8nx+5",d="Form_inputName__+Pfkf",u="Form_container_radio__2lwgt",p="Form_radio__JFyFF",m="Form_btn__0ebGo",h="Form_input__file_button__b2Hyq",f="Form_input__file_icon_wrapper__DE07-",_="Form_visually_hidden__ttMY1",g=t(2791),v=t(8970),b=t(4569),x=t.n(b),y=t(5705),j=t(184);function C(e){var n=e.positions,t=e.setAddUser,i=(0,y.TA)({initialValues:{name:"",email:"",phone:"",position_id:0,photo:""},onSubmit:function(e){b()}}),b=function(){var e=(0,a.Z)(r().mark((function e(){var n,t;return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,x().get("/token");case 3:n=e.sent,(t=n.data).success&&F(t.token),e.next=10;break;case 8:e.prev=8,e.t0=e.catch(0);case 10:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),C=function(){var e=i.values,n=e.name,t=e.email,a=e.phone,r=e.position_id,o=e.photo,s=new FormData;return s.append("name",n),s.set("email",t),s.set("phone",a),s.set("position_id",r),s.append("photo",o),s},F=function(){var e=(0,a.Z)(r().mark((function e(n){return r().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:fetch(" https://frontend-test-assignment-api.abz.agency/api/v1/users",{method:"POST",body:C(),headers:{Token:n}}).then((function(e){return e.json()})).then((function(e){if(console.log(e),e.success)return t((function(e){return!e})),S()})).catch((function(e){}));case 1:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),N=function(e){for(var n=["image/jpeg","image/pjpeg","image/png"],t=0;t<n.length;t++)if(e.type===n[t])return!0;return!1},w=function(){for(var e=document.querySelector("#upload-photo"),n=document.querySelector(".preview");n.firstChild;)n.removeChild(n.firstChild);var t=e.files;if(0===t.length);else{var a=document.createElement("ul");a.classList.add("chose_img"),n.appendChild(a);for(var i=0;i<t.length;i++){var r=document.createElement("li"),o=document.createElement("p");if(N(t[i])){o.textContent=t[i].name+" "+k(t[i].size)+".";var s=document.createElement("img");s.src=window.URL.createObjectURL(t[i]),r.appendChild(s),r.appendChild(o)}else o.textContent="File name "+t[i].name+": Not a valid file type. Update your selection.",r.appendChild(o);a.appendChild(r)}}},k=function(e){return e<1024?e+"bytes":e>1024&&e<1048576?(e/1024).toFixed(1)+"KB":e>1048576?(e/1048576).toFixed(1)+"MB":void 0},S=function(){var e=document.getElementById("form");i.resetForm({name:"",email:"",phone:"",position_id:0,photo:""}),e.reset()};return(0,g.useEffect)((function(){return window.addEventListener("change",w),function(){window.removeEventListener("change",w)}}),[]),(0,j.jsxs)("div",{className:o,id:"register",children:[(0,j.jsx)("h2",{className:s,children:"Working with POST request"}),(0,j.jsxs)("form",{className:l,onSubmit:i.handleSubmit,id:"form",children:[(0,j.jsx)("label",{className:c,children:(0,j.jsx)("input",{id:"name",placeholder:"Your name",className:d,onChange:i.handleChange,value:i.values.name,type:"text",name:"name",pattern:"^[a-zA-Z\u0430-\u044f\u0410-\u042f]+(([' -][a-zA-Z\u0430-\u044f\u0410-\u042f ])?[a-zA-Z\u0430-\u044f\u0410-\u042f]*)*$",title:"Name may contain only letters, apostrophe, dash and spaces. For example Adrian, Jacob Mercer, Charles de Batz de Castelmore d'Artagnan",minLength:2,maxLength:"60",required:!0})}),(0,j.jsx)("label",{className:c,children:(0,j.jsx)("input",{placeholder:"Email",className:d,type:"email",id:"email",onChange:i.handleChange,value:i.values.email,name:"email",minLength:2,maxLength:"100",required:!0})}),(0,j.jsxs)("label",{className:c,children:[(0,j.jsx)("input",{placeholder:"Phone",className:d,onChange:i.handleChange,value:i.values.phone,type:"tel",name:"phone",id:"phone",pattern:"^[\\+]{0,1}380([0-9]{9})$",title:"Phone number must be digits and can contain spaces, dashes, parentheses and can start with +",required:!0}),"+38 (XXX) XXX - XX - XX"]}),(0,j.jsx)("p",{children:"Select your position"}),(0,j.jsx)("div",{className:u,children:null===n||void 0===n?void 0:n.map((function(e){return(0,j.jsxs)("label",{children:[(0,j.jsx)("input",{className:p,id:e.id,type:"radio",name:"position_id",value:e.id,onChange:i.handleChange}),e.name]},e.id)}))}),(0,j.jsxs)("label",{htmlFor:"upload-photo",className:h,children:[(0,j.jsx)("span",{className:f,children:"Upload"}),(0,j.jsx)("span",{className:"input__file-button-text",children:"Upload your photo"})]}),(0,j.jsx)("input",{className:_,id:"upload-photo",name:"photo",type:"file",accept:".jpg, .jpeg",onChange:function(e){i.values.photo=e.currentTarget.files[0]},required:!0}),(0,j.jsx)("div",{className:"preview"}),(0,j.jsxs)("div",{className:m,children:[(0,j.jsx)(v.Z,{type:"submit",isSubmitting:i.isSubmitting,children:i.isSubmitting?"Loading...":"Sign Up"}),"\\"]})]})]})}x().defaults.baseURL="https://frontend-test-assignment-api.abz.agency/api/v1"}}]);
//# sourceMappingURL=745.4d6075f7.chunk.js.map